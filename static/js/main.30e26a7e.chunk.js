(this["webpackJsonprss-reader-fe"]=this["webpackJsonprss-reader-fe"]||[]).push([[0],{101:function(e,t,r){},103:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r.n(n),a=r(55),s=r.n(a),i=r(64),u=(r(72),r(4)),o=r(27),l=r(6),d=r.n(l),j=r(10),b=r(36),f=r.n(b),v=r(61),h=r.n(v),p=r(35),x=r.n(p),O=r(114),m=r(26),k=r.n(m),w=r(56),N=r.n(w),g=function(e){var t=N.a.create({baseURL:"https://meny-rss-reader.herokuapp.com/",timeout:1e4,headers:{Authorization:"Basic "+e}});return{checkAuth:function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.post("/checkauth");case 3:if(200===e.sent.status){e.next=6;break}return e.abrupt("return",!1);case 6:return e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),fetchRssList:function(){var e=Object(j.a)(d.a.mark((function e(){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.get("/rss");case 3:if(200===(r=e.sent).status){e.next=7;break}return console.error("Error during /rss call",r.status,r.data),e.abrupt("return",[]);case 7:return e.abrupt("return",r.data);case 10:return e.prev=10,e.t0=e.catch(0),console.error("Error during /rss call",e.t0),e.abrupt("return",[]);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),updateById:function(){var e=Object(j.a)(d.a.mark((function e(r,n,c){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.put("/rss/".concat(r),{viewed:n,saved:c});case 3:if(200===(a=e.sent).status){e.next=7;break}return console.error("Error during /rss/id call",a.status,a.data),e.abrupt("return",!1);case 7:return e.abrupt("return",!0);case 10:return e.prev=10,e.t0=e.catch(0),console.error("Error during /rss/id call",e.t0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,r,n){return e.apply(this,arguments)}}(),getNextFromQueue:function(){var e=Object(j.a)(d.a.mark((function e(){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.get("/rss/queue/next");case 3:if(200===(r=e.sent).status){e.next=7;break}return console.error("Error during /rss/queue/next call",r.status,r.data),e.abrupt("return",{count:0});case 7:return e.abrupt("return",r.data);case 10:return e.prev=10,e.t0=e.catch(0),console.error("Error during /rss/queue/next call",e.t0),e.abrupt("return",{count:0});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}()}},S=r(1),y=c.a.createContext({service:g(""),setService:function(){}}),E=function(){return c.a.useContext(y)};function C(e){var t=e.children,r=k.a.get("auth_token"),n=c.a.useState(g(r||"")),a=Object(u.a)(n,2),s=a[0],i=a[1],o=c.a.useMemo((function(){return{service:s,setService:i}}),[s]);return Object(S.jsx)(y.Provider,{value:o,children:t})}r(93);var F=r(57),L=r(58),A=function(){function e(){Object(F.a)(this,e)}return Object(L.a)(e,null,[{key:"getFilter",value:function(){var e=localStorage.getItem("filter");return e||"ALL"}},{key:"setFilter",value:function(e){localStorage.setItem("filter",e)}},{key:"filter",value:function(e){var t=this.getFilter();return"SAVED"===t?e.filter((function(e){return e.saved})):"UNSEEN"===t?e.filter((function(e){return!e.viewed})):e}}]),e}();function P(){var e=E().service,t=c.a.useState([]),r=Object(u.a)(t,2),a=r[0],s=r[1],i=c.a.useState([]),o=Object(u.a)(i,2),l=o[0],b=o[1],f=c.a.useState(!1),v=Object(u.a)(f,2),h=v[0],p=v[1],x=c.a.useState(A.getFilter()),m=Object(u.a)(x,2),k=m[0],w=m[1];return Object(n.useEffect)((function(){var t=function(){var t=Object(j.a)(d.a.mark((function t(){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p(!0),t.next=3,e.fetchRssList();case 3:(r=t.sent).sort((function(e,t){return t.id-e.id})),s(r),p(!1);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e]),Object(n.useEffect)((function(){A.setFilter(k)}),[k]),Object(n.useEffect)((function(){b(A.filter(a))}),[a,k]),h?Object(S.jsx)("div",{className:"CenterPage",children:Object(S.jsx)(O.a,{})}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)("div",{className:"filters",children:[Object(S.jsx)("div",{className:"filter clickable ".concat("ALL"===k?"active-filter":""),onClick:function(){w("ALL")},children:"ALL"}),Object(S.jsx)("div",{className:"filter clickable ".concat("UNSEEN"===k?"active-filter":""),onClick:function(){w("UNSEEN")},children:"UNSEEN"}),Object(S.jsx)("div",{className:"filter clickable ".concat("SAVED"===k?"active-filter":""),onClick:function(){w("SAVED")},children:"SAVED"})]}),Object(S.jsx)("div",{className:"rss-list",children:l.map((function(e,t){return Object(S.jsx)(R,{rss:e,updateRss:function(e){var t=a.map((function(t){return t.id===e.id?e:t}));s(t)}},e.id)}))})]})}function R(e){var t=e.rss,r=e.updateRss,n=E().service;return Object(S.jsxs)("div",{className:t.viewed&&!t.saved?"rss-row viewed disabled":"rss-row",children:[Object(S.jsx)("div",{className:"rss-title clickable",onClick:function(){window.open(t.url,"_blank").focus()},children:t.title}),Object(S.jsxs)("div",{className:"icons",children:[Object(S.jsx)("div",{onClick:function(){var e=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.updateById(t.id,t.viewed,!t.saved);case 2:e.sent?r(Object(o.a)(Object(o.a)({},t),{},{saved:!t.saved})):alert("Update failed");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()},children:Object(S.jsx)(x.a,{className:t.saved?"clickable":"clickable disabled"})}),Object(S.jsx)("div",{onClick:function(){var e=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.updateById(t.id,!t.viewed,t.saved);case 2:e.sent?r(Object(o.a)(Object(o.a)({},t),{},{viewed:!t.viewed})):alert("Update failed");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()},children:Object(S.jsx)(I,{viewed:t.viewed})})]})]})}function I(e){return e.viewed?Object(S.jsx)("div",{className:"clickable",children:Object(S.jsx)(h.a,{})}):Object(S.jsx)("div",{className:"clickable",children:Object(S.jsx)(f.a,{})})}var B=r(62),U=r.n(B);r(98);function q(){var e=E().service,t=c.a.useState(!0),r=Object(u.a)(t,2),a=r[0],s=r[1],i=c.a.useState(0),o=Object(u.a)(i,2),l=o[0],b=o[1],f=c.a.useState(null),v=Object(u.a)(f,2),h=v[0],p=v[1],x=function(){var t=Object(j.a)(d.a.mark((function t(){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s(!0),p(null),t.next=4,e.getNextFromQueue();case 4:r=t.sent,s(!1),b(r.count),p(r.rss);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){x()}),[]),a?Object(S.jsx)("div",{className:"CenterPage",children:Object(S.jsx)(O.a,{})}):Object(S.jsxs)("div",{className:"content",children:[Object(S.jsxs)("div",{className:"count",children:["In queue: ",l]}),h?Object(S.jsx)(D,{rss:h,fetchNextRss:x}):Object(S.jsx)("div",{className:"button clickable footer",onClick:x,children:Object(S.jsx)(U.a,{})}),h?Object(S.jsx)(_,{rss:h,fetchNextRss:x}):null]})}function D(e){var t=e.rss;return Object(S.jsxs)("div",{className:"details clickable",onClick:function(){window.open(t.url,"_blank").focus()},children:[Object(S.jsxs)("div",{children:["Rank: ",t.rank]}),Object(S.jsx)("div",{children:"Title: "}),Object(S.jsx)("hr",{}),Object(S.jsx)("div",{className:"title",children:t.title})]})}function _(e){var t=e.rss,r=e.fetchNextRss,n=E().service;return Object(S.jsxs)("div",{className:"buttons footer",children:[Object(S.jsx)("div",{className:"button clickable",onClick:function(){var e=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.updateById(t.id,!0,!0);case 2:e.sent?r():alert("Problem to bookmark rss");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()},children:Object(S.jsx)(x.a,{})}),Object(S.jsx)("div",{className:"button clickable",onClick:function(){var e=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.updateById(t.id,!0,!1);case 2:e.sent?r():alert("Problem to update rss");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()},children:Object(S.jsx)(f.a,{})})]})}function V(){var e=n.useState("/"),t=Object(u.a)(e,2),r=t[0],c=t[1];return"/"===r?Object(S.jsxs)("div",{className:"menu",children:[Object(S.jsx)("div",{className:"menu-item",onClick:function(){c("/list")},children:"Rss List"}),Object(S.jsx)("div",{className:"menu-item",onClick:function(){c("/queue")},children:"Rss Queue"})]}):"/list"===r?Object(S.jsx)(P,{}):"/queue"===r?Object(S.jsx)(q,{}):Object(S.jsxs)("div",{children:["Page '",r,"' not fount"]})}var Q=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,115)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;r(e),n(e),c(e),a(e),s(e)}))},T=r(63),J=r.n(T);r(101);function M(e){var t=e.children,r=c.a.useState(!1),n=Object(u.a)(r,2),a=n[0],s=n[1],i=c.a.useState(!1),o=Object(u.a)(i,2),l=o[0],b=o[1],f=c.a.useState(""),v=Object(u.a)(f,2),h=v[0],p=v[1],x=c.a.useState(""),m=Object(u.a)(x,2),w=m[0],N=m[1],y=E(),C=y.service,F=y.setService;return c.a.useEffect((function(){var e=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,C.checkAuth();case 3:e.sent?s(!0):(s(!1),k.a.remove("auth_token")),b(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[C]),l?Object(S.jsx)("div",{className:"CenterPage",children:Object(S.jsx)(O.a,{})}):a?t:Object(S.jsx)("div",{className:"CenterPage",children:Object(S.jsx)("form",{onSubmit:function(e){var t=J.a.encode("".concat(h,":").concat(w));k.a.set("auth_token",t),F(g(t)),e.preventDefault()},children:Object(S.jsxs)("table",{children:[Object(S.jsx)("thead",{}),Object(S.jsxs)("tbody",{children:[Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:Object(S.jsx)("label",{htmlFor:"username",children:"Username: "})}),Object(S.jsx)("td",{children:Object(S.jsx)("input",{type:"text",value:h,onChange:function(e){p(e.target.value)}})})]}),Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:Object(S.jsx)("label",{htmlFor:"password",children:"Password: "})}),Object(S.jsx)("td",{children:Object(S.jsx)("input",{type:"password",value:w,onChange:function(e){N(e.target.value)}})})]}),Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{}),Object(S.jsx)("td",{className:"Submit",children:Object(S.jsx)("input",{type:"submit",value:"Submit"})})]})]})]})})})}s.a.render(Object(S.jsx)(c.a.StrictMode,{children:Object(S.jsx)(C,{children:Object(S.jsx)(M,{children:Object(S.jsx)(i.a,{children:Object(S.jsx)(V,{})})})})}),document.getElementById("root")),Q()},72:function(e,t,r){},93:function(e,t,r){},98:function(e,t,r){}},[[103,1,2]]]);
//# sourceMappingURL=main.30e26a7e.chunk.js.map