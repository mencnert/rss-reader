{"version":3,"sources":["services/service.js","components/WithService.jsx","services/filterService.js","pages/RssListPage.jsx","App.jsx","reportWebVitals.js","components/WithLogin.jsx","index.jsx"],"names":["createService","token","http","axios","create","baseURL","process","timeout","headers","Authorization","checkAuth","a","post","status","fetchRssList","get","res","console","error","data","updateById","id","viewed","saved","put","ServiceContext","React","createContext","service","setService","useService","useContext","WithService","children","Cookies","useState","value","useMemo","Provider","FilterService","filter","localStorage","getItem","setItem","rssList","this","getFilter","rss","RssListPage","setRssList","filteredRssList","setFilteredRssList","loading","setLoading","setFilter","useEffect","fetch","sort","b","className","CircularProgress","onClick","map","i","RssRow","updateRss","newState","newRssList","v","window","open","url","focus","title","update","alert","SeenToggleIcon","App","router","setRouter","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","WithLogin","logged","setLogged","user","setUser","pass","setPass","remove","onSubmit","event","base64","encode","set","preventDefault","htmlFor","type","onChange","e","target","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6866f938.chunk.js","sourcesContent":["import axios from \"axios\";\n\nexport const createService = (token) => {\n    const http = axios.create({\n        baseURL: process.env.REACT_APP_BACKEND_URL,\n        timeout: 10000,\n        headers: {\n            Authorization: \"Basic \" + token,\n        }\n    })\n    return {\n        checkAuth: async () => {\n            try {\n                const res = await http.post(`/checkauth`);\n                if (res.status !== 200) {\n                    return false;\n                }\n                return true;\n            } catch (error) {\n                return false;\n            }\n        },\n        fetchRssList: async () => {\n            try {\n                const res = await http.get('/rss')\n                if (res.status !== 200) {\n                    console.error(\"Error during /rss call\", res.status, res.data)\n                    return []\n                }\n\n                return res.data\n            } catch (err) {\n                console.error(\"Error during /rss call\", err)\n            }\n        },\n        updateById: async (id, viewed, saved) => {\n            try {\n                const res = await http.put(`/rss/${id}`, {viewed, saved})\n                if (res.status !== 200) {\n                    console.error(\"Error during /rss/id call\", res.status, res.data)\n                    return false\n                }\n                return true\n            } catch (err) {\n                console.error(\"Error during /rss/id call\", err)\n                return false\n            }\n        }\n    }\n}","import React from \"react\";\nimport Cookies from \"js-cookie\";\nimport { createService } from \"../services/service\";\n\nexport const ServiceContext = React.createContext({\n  service: createService(\"\"),\n  setService: () => {},\n});\n\nexport const useService = () => React.useContext(ServiceContext);\n\nexport default function WithService({ children }) {\n  const token = Cookies.get(\"auth_token\");\n  const [service, setService] = React.useState(createService(token? token : \"\"));\n  const value = React.useMemo(() => ({ service, setService }), [service]);\n  return (\n    <ServiceContext.Provider value={value}>{children}</ServiceContext.Provider>\n  );\n}\n","export class FilterService {\n\n    static getFilter() {\n        const filter = localStorage.getItem(\"filter\")\n        if (!filter) {\n            return \"ALL\"\n        }\n        return filter\n    }\n\n    static setFilter(filter) {\n        localStorage.setItem(\"filter\", filter)\n    }\n\n    static filter(rssList) {\n        const filter = this.getFilter()\n\n        if (filter === \"SAVED\") {\n            return rssList.filter(rss => rss.saved)\n        }\n        else if (filter === \"UNSEEN\") {\n            return rssList.filter(rss=> !rss.viewed)\n        }\n        else {\n            return rssList\n        }\n    }\n}","import React, { useEffect } from \"react\";\nimport VisibilityIcon from \"@mui/icons-material/Visibility\";\nimport VisibilityOffIcon from \"@mui/icons-material/VisibilityOff\";\nimport BookmarkIcon from \"@mui/icons-material/Bookmark\";\nimport CircularProgress from \"@mui/material/CircularProgress\";\n\nimport { useService } from \"../components/WithService\";\nimport \"./RssListPage.css\";\nimport { FilterService } from \"../services/filterService\";\n\nexport default function RssListPage() {\n  const { service } = useService();\n  const [rssList, setRssList] = React.useState([]);\n  const [filteredRssList, setFilteredRssList] = React.useState([]);\n  const [loading, setLoading] = React.useState(false);\n  const [filter, setFilter] = React.useState(FilterService.getFilter());\n\n  useEffect(() => {\n    const fetch = async () => {\n      setLoading(true);\n      const data = await service.fetchRssList();\n      data.sort(function (a, b) {\n        return b.id - a.id;\n      });\n      setRssList(data);\n      setLoading(false);\n    };\n    fetch();\n  }, [service]);\n\n  useEffect(() => {\n    FilterService.setFilter(filter);\n  }, [filter]);\n\n  useEffect(() => {\n    setFilteredRssList(FilterService.filter(rssList));\n  }, [rssList, filter]);\n\n  if (loading) {\n    return (\n      <div className=\"CenterPage\">\n        <CircularProgress />\n      </div>\n    );\n  }\n  return (\n    <>\n      <div className=\"filters\">\n        <div\n          className={`filter clickable ${\n            filter === \"ALL\" ? \"active-filter\" : \"\"\n          }`}\n          onClick={() => {\n            setFilter(\"ALL\");\n          }}\n        >\n          ALL\n        </div>\n        <div\n          className={`filter clickable ${\n            filter === \"UNSEEN\" ? \"active-filter\" : \"\"\n          }`}\n          onClick={() => {\n            setFilter(\"UNSEEN\");\n          }}\n        >\n          UNSEEN\n        </div>\n        <div\n          className={`filter clickable ${\n            filter === \"SAVED\" ? \"active-filter\" : \"\"\n          }`}\n          onClick={() => {\n            setFilter(\"SAVED\");\n          }}\n        >\n          SAVED\n        </div>\n      </div>\n      <div className=\"rss-list\">\n        {filteredRssList.map((rss, i) => (\n          <RssRow\n            rss={rss}\n            updateRss={(newState) => {\n              const newRssList = rssList.map((v) => {\n                if (v.id === newState.id) {\n                  return newState;\n                } else {\n                  return v;\n                }\n              });\n              setRssList(newRssList);\n            }}\n            key={rss.id}\n          />\n        ))}\n      </div>\n    </>\n  );\n}\n\nfunction RssRow({ rss, updateRss }) {\n  const { service } = useService();\n\n  return (\n    <div\n      className={\n        rss.viewed && !rss.saved ? \"rss-row viewed disabled\" : \"rss-row\"\n      }\n    >\n      <div\n        className=\"rss-title clickable\"\n        onClick={() => {\n          window.open(rss.url, \"_blank\").focus();\n        }}\n      >\n        {rss.title}\n      </div>\n\n      <div className=\"icons\">\n        <div\n          onClick={() => {\n            const update = async () => {\n              const ok = await service.updateById(\n                rss.id,\n                rss.viewed,\n                !rss.saved\n              );\n              if (ok) {\n                updateRss({ ...rss, saved: !rss.saved });\n              } else {\n                alert(\"Update failed\");\n              }\n            };\n            update();\n          }}\n        >\n          <BookmarkIcon\n            className={rss.saved ? \"clickable\" : \"clickable disabled\"}\n          />\n        </div>\n        <div\n          onClick={() => {\n            const update = async () => {\n              const ok = await service.updateById(\n                rss.id,\n                !rss.viewed,\n                rss.saved\n              );\n              if (ok) {\n                updateRss({ ...rss, viewed: !rss.viewed });\n              } else {\n                alert(\"Update failed\");\n              }\n            };\n            update();\n          }}\n        >\n          <SeenToggleIcon viewed={rss.viewed} />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction SeenToggleIcon({ viewed }) {\n  if (viewed) {\n    return (\n      <div className=\"clickable\">\n        <VisibilityOffIcon />\n      </div>\n    );\n  } else {\n    return (\n      <div className=\"clickable\">\n        <VisibilityIcon />\n      </div>\n    );\n  }\n}\n","import * as React from \"react\";\nimport RssListPage from \"./pages/RssListPage\";\n\nexport default function App() {\n  const [router, setRouter] = React.useState(\"/\")\n  if (router === \"/\") {\n    return (\n      <div className=\"menu\">\n        <div className=\"menu-item\" onClick={()=>{setRouter(\"/list\")}}>Rss List</div>\n        <div className=\"menu-item\" onClick={()=>{setRouter(\"/queue\")}}>Rss Queue</div>\n      </div>\n    )\n  }\n  if (router === \"/list\") {\n      return <RssListPage />\n  }\n\n  if (router === \"/queue\") {\n    return <div>queue page</div>\n  }\n\n  return (\n    <div>Page '{router}' not fount</div>\n  )\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport Cookies from \"js-cookie\";\nimport base64 from \"base-64\";\nimport CircularProgress from \"@mui/material/CircularProgress\";\n\nimport \"./Login.css\";\nimport { useService } from \"./WithService\";\nimport { createService } from \"../services/service\";\n\nexport default function WithLogin({ children }) {\n  const [logged, setLogged] = React.useState(false);\n  const [loading, setLoading] = React.useState(false);\n  const [user, setUser] = React.useState(\"\");\n  const [pass, setPass] = React.useState(\"\");\n  const { service, setService } = useService();\n\n  React.useEffect(() => {\n    const checkAuth = async () => {\n      setLoading(true)\n      const isLoggedIn = await service.checkAuth();\n      if (isLoggedIn) {\n        setLogged(true);\n      } else {\n        setLogged(false);\n        Cookies.remove(\"auth_token\");\n      }\n      setLoading(false)\n    };\n    checkAuth();\n  }, [service]);\n\n  function handleSubmit(event) {\n    const token = base64.encode(`${user}:${pass}`);\n    Cookies.set(\"auth_token\", token);\n    setService(createService(token));\n    event.preventDefault();\n  }\n\n  if (loading) {\n    return (\n      <div className=\"CenterPage\">\n        <CircularProgress />\n      </div>\n    );\n  }\n\n  if (logged) {\n    return children;\n  }\n\n  return (\n    <div className=\"CenterPage\">\n      <form onSubmit={handleSubmit}>\n        <table>\n          <thead></thead>\n          <tbody>\n            <tr>\n              <td>\n                <label htmlFor=\"username\">Username: </label>\n              </td>\n              <td>\n                <input\n                  type=\"text\"\n                  value={user}\n                  onChange={(e) => {\n                    setUser(e.target.value);\n                  }}\n                />\n              </td>\n            </tr>\n            <tr>\n              <td>\n                <label htmlFor=\"password\">Password: </label>\n              </td>\n              <td>\n                <input\n                  type=\"password\"\n                  value={pass}\n                  onChange={(e) => {\n                    setPass(e.target.value);\n                  }}\n                />\n              </td>\n            </tr>\n            <tr>\n              <td></td>\n              <td className=\"Submit\">\n                <input type=\"submit\" value=\"Submit\" />\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </form>\n    </div>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter } from \"react-router-dom\";\n\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport WithLogin from \"./components/WithLogin\";\nimport WithService from \"./components/WithService\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <WithService>\n      <WithLogin>\n        <BrowserRouter>\n          <App />\n        </BrowserRouter>\n      </WithLogin>\n    </WithService>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\nreportWebVitals();\n"],"sourceRoot":""}