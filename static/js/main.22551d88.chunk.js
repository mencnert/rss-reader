(this["webpackJsonprss-reader-fe"]=this["webpackJsonprss-reader-fe"]||[]).push([[0],{100:function(e,t,r){},102:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r.n(n),a=r(55),s=r.n(a),i=r(27),u=(r(72),r(4)),o=r(1);function l(){return Object(o.jsx)("div",{children:Object(o.jsx)("button",{children:Object(o.jsx)(i.b,{to:"/rss-reader/list",children:"RSS List"})})})}var d=r(30),j=r(9),f=r.n(j),b=r(18),v=r(6),h=r(63),p=r.n(h),O=r(62),x=r.n(O),m=r(61),w=r.n(m),k=r(114),S=r(29),g=r.n(S),E=r(56),N=r.n(E),y=function(e){var t=N.a.create({baseURL:"https://meny-rss-reader.herokuapp.com/",timeout:1e4,headers:{Authorization:"Basic "+e}});return{checkAuth:function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.post("/checkauth");case 3:if(200===e.sent.status){e.next=6;break}return e.abrupt("return",!1);case 6:return e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),fetchRssList:function(){var e=Object(b.a)(f.a.mark((function e(){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.get("/rss");case 3:if(200===(r=e.sent).status){e.next=7;break}return console.error("Error during /rss call",r.status,r.data),e.abrupt("return",[]);case 7:return e.abrupt("return",r.data);case 10:e.prev=10,e.t0=e.catch(0),console.error("Error during /rss call",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),updateById:function(){var e=Object(b.a)(f.a.mark((function e(r,n,c){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.put("/rss/".concat(r),{viewed:n,saved:c});case 3:if(200===(a=e.sent).status){e.next=7;break}return console.error("Error during /rss/id call",a.status,a.data),e.abrupt("return",!1);case 7:return e.abrupt("return",!0);case 10:return e.prev=10,e.t0=e.catch(0),console.error("Error during /rss/id call",e.t0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,r,n){return e.apply(this,arguments)}}()}},C=c.a.createContext({service:y(""),setService:function(){}}),L=function(){return c.a.useContext(C)};function F(e){var t=e.children,r=g.a.get("auth_token"),n=c.a.useState(y(r||"")),a=Object(v.a)(n,2),s=a[0],i=a[1],u=c.a.useMemo((function(){return{service:s,setService:i}}),[s]);return Object(o.jsx)(C.Provider,{value:u,children:t})}r(93);var A=r(57),U=r(58),I=function(){function e(){Object(A.a)(this,e)}return Object(U.a)(e,null,[{key:"getFilter",value:function(){var e=localStorage.getItem("filter");return e||"ALL"}},{key:"setFilter",value:function(e){localStorage.setItem("filter",e)}},{key:"filter",value:function(e){var t=this.getFilter();return"SAVED"===t?e.filter((function(e){return e.saved})):"UNSEEN"===t?e.filter((function(e){return!e.viewed})):e}}]),e}();function B(){var e=L().service,t=c.a.useState([]),r=Object(v.a)(t,2),a=r[0],s=r[1],i=c.a.useState([]),u=Object(v.a)(i,2),l=u[0],d=u[1],j=c.a.useState(!1),h=Object(v.a)(j,2),p=h[0],O=h[1],x=c.a.useState(I.getFilter()),m=Object(v.a)(x,2),w=m[0],S=m[1];return Object(n.useEffect)((function(){var t=function(){var t=Object(b.a)(f.a.mark((function t(){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return O(!0),t.next=3,e.fetchRssList();case 3:(r=t.sent).sort((function(e,t){return t.id-e.id})),s(r),O(!1);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e]),Object(n.useEffect)((function(){I.setFilter(w)}),[w]),Object(n.useEffect)((function(){d(I.filter(a))}),[a,w]),p?Object(o.jsx)("div",{className:"CenterPage",children:Object(o.jsx)(k.a,{})}):Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{className:"filters",children:[Object(o.jsx)("div",{className:"filter ".concat("ALL"===w?"active":""),onClick:function(){S("ALL")},children:"ALL"}),Object(o.jsx)("div",{className:"filter ".concat("UNSEEN"===w?"active":""),onClick:function(){S("UNSEEN")},children:"UNSEEN"}),Object(o.jsx)("div",{className:"filter ".concat("SAVED"===w?"active":""),onClick:function(){S("SAVED")},children:"SAVED"})]}),Object(o.jsxs)("table",{className:"rss-list",children:[Object(o.jsx)("thead",{}),Object(o.jsx)("tbody",{children:l.map((function(e,t){return Object(o.jsx)(D,{rss:e,updateRss:function(e){var t=a.map((function(t){return t.id===e.id?e:t}));s(t)}},e.id)}))})]})]})}function D(e){var t=e.rss,r=e.updateRss,n=L().service;return Object(o.jsxs)("tr",{className:t.viewed&&!t.saved?"viewed disabled":"",children:[Object(o.jsx)("td",{className:"rss-col",onClick:function(){var e=function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.updateById(t.id,t.viewed,!t.saved);case 2:e.sent?r(Object(d.a)(Object(d.a)({},t),{},{saved:!t.saved})):alert("Update failed");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()},children:Object(o.jsx)(w.a,{className:t.saved?"":"disabled"})}),Object(o.jsx)("td",{className:"rss-col",onClick:function(){window.open(t.url,"_blank").focus()},children:t.title}),Object(o.jsx)("td",{className:"rss-col",onClick:function(){var e=function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.updateById(t.id,!t.viewed,t.saved);case 2:e.sent?r(Object(d.a)(Object(d.a)({},t),{},{viewed:!t.viewed})):alert("Update failed");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()},children:t.viewed?Object(o.jsx)(x.a,{}):Object(o.jsx)(p.a,{})})]})}function P(){return Object(o.jsxs)(u.c,{children:[Object(o.jsx)(u.a,{path:"/rss-reader",element:Object(o.jsx)(l,{})}),Object(o.jsx)(u.a,{path:"/rss-reader/list",element:Object(o.jsx)(B,{})})]})}var R=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,115)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;r(e),n(e),c(e),a(e),s(e)}))},V=r(64),_=r.n(V);r(100);function J(e){var t=e.children,r=c.a.useState(!1),n=Object(v.a)(r,2),a=n[0],s=n[1],i=c.a.useState(""),u=Object(v.a)(i,2),l=u[0],d=u[1],j=c.a.useState(""),h=Object(v.a)(j,2),p=h[0],O=h[1],x=L(),m=x.service,w=x.setService;return c.a.useEffect((function(){var e=function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.checkAuth();case 2:e.sent?s(!0):(s(!1),g.a.remove("auth_token"));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[m]),a?t:Object(o.jsx)("div",{className:"CenterPage",children:Object(o.jsx)("form",{onSubmit:function(e){var t=_.a.encode("".concat(l,":").concat(p));g.a.set("auth_token",t),w(y(t)),e.preventDefault()},children:Object(o.jsxs)("table",{children:[Object(o.jsx)("thead",{}),Object(o.jsxs)("tbody",{children:[Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:Object(o.jsx)("label",{htmlFor:"username",children:"Username: "})}),Object(o.jsx)("td",{children:Object(o.jsx)("input",{type:"text",value:l,onChange:function(e){d(e.target.value)}})})]}),Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:Object(o.jsx)("label",{htmlFor:"password",children:"Password: "})}),Object(o.jsx)("td",{children:Object(o.jsx)("input",{type:"password",value:p,onChange:function(e){O(e.target.value)}})})]}),Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{}),Object(o.jsx)("td",{className:"Submit",children:Object(o.jsx)("input",{type:"submit",value:"Submit"})})]})]})]})})})}s.a.render(Object(o.jsx)(c.a.StrictMode,{children:Object(o.jsx)(F,{children:Object(o.jsx)(J,{children:Object(o.jsx)(i.a,{children:Object(o.jsx)(P,{})})})})}),document.getElementById("root")),R()},72:function(e,t,r){},93:function(e,t,r){}},[[102,1,2]]]);
//# sourceMappingURL=main.22551d88.chunk.js.map