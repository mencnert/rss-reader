(this["webpackJsonprss-reader-fe"]=this["webpackJsonprss-reader-fe"]||[]).push([[0],{101:function(e,t,r){},103:function(e,t,r){"use strict";r.r(t);var n=r(1),c=r.n(n),a=r(56),s=r.n(a),u=(r(72),r(6)),i=r(28),l=r(4),o=r.n(l),d=r(8),j=r(36),b=r.n(j),f=r(62),v=r.n(f),p=r(35),x=r.n(p),h=r(114),O=r(27),m=r.n(O),k=r(57),w=r.n(k),N=function(e){var t=w.a.create({baseURL:"https://meny-rss-reader.herokuapp.com/",timeout:1e4,headers:{Authorization:"Basic "+e}});return{checkAuth:function(){var e=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.post("/checkauth");case 3:if(200===e.sent.status){e.next=6;break}return e.abrupt("return",!1);case 6:return e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),fetchRssList:function(){var e=Object(d.a)(o.a.mark((function e(){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.get("/rss");case 3:if(200===(r=e.sent).status){e.next=7;break}return console.error("Error during /rss call",r.status,r.data),e.abrupt("return",[]);case 7:return e.abrupt("return",r.data);case 10:return e.prev=10,e.t0=e.catch(0),console.error("Error during /rss call",e.t0),e.abrupt("return",[]);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),updateById:function(){var e=Object(d.a)(o.a.mark((function e(r,n,c){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.put("/rss/".concat(r),{viewed:n,saved:c});case 3:if(200===(a=e.sent).status){e.next=7;break}return console.error("Error during /rss/id call",a.status,a.data),e.abrupt("return",!1);case 7:return e.abrupt("return",!0);case 10:return e.prev=10,e.t0=e.catch(0),console.error("Error during /rss/id call",e.t0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,r,n){return e.apply(this,arguments)}}(),getNextFromQueue:function(){var e=Object(d.a)(o.a.mark((function e(){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.get("/rss/queue/next");case 3:if(200===(r=e.sent).status){e.next=7;break}return console.error("Error during /rss/queue/next call",r.status,r.data),e.abrupt("return",{count:0});case 7:return e.abrupt("return",r.data);case 10:return e.prev=10,e.t0=e.catch(0),console.error("Error during /rss/queue/next call",e.t0),e.abrupt("return",{count:0});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),cleanRssQueue:function(){var e=Object(d.a)(o.a.mark((function e(){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.delete("/rss/queue/clean");case 3:if(200===(r=e.sent).status){e.next=7;break}return console.error("Error during /rss/queue/clean call",r.status,r.data),e.abrupt("return",!1);case 7:return e.abrupt("return",!0);case 10:return e.prev=10,e.t0=e.catch(0),console.error("Error during /rss/queue/clean call",e.t0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}()}},g=r(0),S=c.a.createContext({service:N(""),setService:function(){}}),C=function(){return c.a.useContext(S)};function y(e){var t=e.children,r=m.a.get("auth_token"),n=c.a.useState(N(r||"")),a=Object(u.a)(n,2),s=a[0],i=a[1],l=c.a.useMemo((function(){return{service:s,setService:i}}),[s]);return Object(g.jsx)(S.Provider,{value:l,children:t})}r(93);var E=r(58),F=r(59),L=function(){function e(){Object(E.a)(this,e)}return Object(F.a)(e,null,[{key:"getFilter",value:function(){var e=localStorage.getItem("filter");return e||"ALL"}},{key:"setFilter",value:function(e){localStorage.setItem("filter",e)}},{key:"filter",value:function(e){var t=this.getFilter();return"SAVED"===t?e.filter((function(e){return e.saved})):"UNSEEN"===t?e.filter((function(e){return!e.viewed})):e}}]),e}();function P(){var e=C().service,t=c.a.useState([]),r=Object(u.a)(t,2),a=r[0],s=r[1],i=c.a.useState([]),l=Object(u.a)(i,2),j=l[0],b=l[1],f=c.a.useState(!1),v=Object(u.a)(f,2),p=v[0],x=v[1],O=c.a.useState(L.getFilter()),m=Object(u.a)(O,2),k=m[0],w=m[1];return Object(n.useEffect)((function(){var t=function(){var t=Object(d.a)(o.a.mark((function t(){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return x(!0),t.next=3,e.fetchRssList();case 3:(r=t.sent).sort((function(e,t){return t.id-e.id})),s(r),x(!1);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e]),Object(n.useEffect)((function(){L.setFilter(k)}),[k]),Object(n.useEffect)((function(){b(L.filter(a))}),[a,k]),p?Object(g.jsx)("div",{className:"CenterPage",children:Object(g.jsx)(h.a,{})}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("div",{className:"filters",children:[Object(g.jsx)("div",{className:"filter clickable ".concat("ALL"===k?"active-filter":""),onClick:function(){w("ALL")},children:"ALL"}),Object(g.jsx)("div",{className:"filter clickable ".concat("UNSEEN"===k?"active-filter":""),onClick:function(){w("UNSEEN")},children:"UNSEEN"}),Object(g.jsx)("div",{className:"filter clickable ".concat("SAVED"===k?"active-filter":""),onClick:function(){w("SAVED")},children:"SAVED"})]}),Object(g.jsx)("div",{className:"rss-list",children:j.map((function(e,t){return Object(g.jsx)(R,{rss:e,updateRss:function(e){var t=a.map((function(t){return t.id===e.id?e:t}));s(t)}},e.id)}))})]})}function R(e){var t=e.rss,r=e.updateRss,n=C().service;return Object(g.jsxs)("div",{className:t.viewed&&!t.saved?"rss-row viewed disabled":"rss-row",children:[Object(g.jsx)("div",{className:"rss-title clickable",onClick:function(){window.open(t.url,"_blank").focus()},children:t.title}),Object(g.jsxs)("div",{className:"icons",children:[Object(g.jsx)("div",{onClick:function(){var e=function(){var e=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.updateById(t.id,t.viewed,!t.saved);case 2:e.sent?r(Object(i.a)(Object(i.a)({},t),{},{saved:!t.saved})):alert("Update failed");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()},children:Object(g.jsx)(x.a,{className:t.saved?"clickable":"clickable disabled"})}),Object(g.jsx)("div",{onClick:function(){var e=function(){var e=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.updateById(t.id,!t.viewed,t.saved);case 2:e.sent?r(Object(i.a)(Object(i.a)({},t),{},{viewed:!t.viewed})):alert("Update failed");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()},children:Object(g.jsx)(q,{viewed:t.viewed})})]})]})}function q(e){return e.viewed?Object(g.jsx)("div",{className:"clickable",children:Object(g.jsx)(v.a,{})}):Object(g.jsx)("div",{className:"clickable",children:Object(g.jsx)(b.a,{})})}var A=r(63),I=r.n(A);r(98);function B(){var e=C().service,t=c.a.useState(!0),r=Object(u.a)(t,2),a=r[0],s=r[1],i=c.a.useState(0),l=Object(u.a)(i,2),j=l[0],b=l[1],f=c.a.useState(null),v=Object(u.a)(f,2),p=v[0],x=v[1],O=function(){var t=Object(d.a)(o.a.mark((function t(){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s(!0),x(null),t.next=4,e.getNextFromQueue();case 4:r=t.sent,s(!1),b(r.count),x(r.rss);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){O()}),[]),a?Object(g.jsx)("div",{className:"CenterPage",children:Object(g.jsx)(h.a,{})}):Object(g.jsxs)("div",{className:"content",children:[Object(g.jsxs)("div",{className:"count",children:["In queue: ",j]}),p?Object(g.jsx)(U,{rss:p,fetchNextRss:O}):Object(g.jsx)("div",{className:"button clickable footer",onClick:O,children:Object(g.jsx)(I.a,{})}),p?Object(g.jsx)(Q,{rss:p,fetchNextRss:O}):null]})}function U(e){var t=e.rss;return Object(g.jsxs)("div",{className:"details clickable",onClick:function(){window.open(t.url,"_blank").focus()},children:[Object(g.jsxs)("div",{children:["Rank: ",t.rank]}),Object(g.jsx)("div",{children:"Title: "}),Object(g.jsx)("hr",{}),Object(g.jsx)("div",{className:"title",children:t.title})]})}function Q(e){var t=e.rss,r=e.fetchNextRss,n=C().service;return Object(g.jsxs)("div",{className:"buttons footer",children:[Object(g.jsx)("div",{className:"button clickable",onClick:function(){var e=function(){var e=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.updateById(t.id,!0,!0);case 2:e.sent?r():alert("Problem to bookmark rss");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()},children:Object(g.jsx)(x.a,{})}),Object(g.jsx)("div",{className:"button clickable",onClick:function(){var e=function(){var e=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.updateById(t.id,!0,!1);case 2:e.sent?r():alert("Problem to update rss");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()},children:Object(g.jsx)(b.a,{})})]})}var D=r(46),_=r.n(D);function T(){var e=C().service,t=c.a.useState(!1),r=Object(u.a)(t,2),n=r[0],a=r[1],s=c.a.useState(!1),i=Object(u.a)(s,2),l=i[0],j=i[1];return n?Object(g.jsx)("div",{className:"CenterPage",children:Object(g.jsx)(h.a,{})}):l?Object(g.jsx)("div",{className:"CenterPage",children:"Cleaned"}):Object(g.jsxs)("div",{className:"menu-item",style:{display:"flex",alignItems:"flex-end",justifyContent:"center",marginTop:"45vh"},onClick:function(){var t=function(){var t=Object(d.a)(o.a.mark((function t(){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(!0),t.next=3,e.cleanRssQueue();case 3:(r=t.sent)||alert("sth go wrong"),j(r),a(!1);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()},children:[Object(g.jsx)(_.a,{}),"Clean Queue",Object(g.jsx)(_.a,{})]})}function V(){var e=n.useState("/"),t=Object(u.a)(e,2),r=t[0],c=t[1];return"/"===r?Object(g.jsxs)("div",{className:"menu",children:[Object(g.jsx)("div",{className:"menu-item",onClick:function(){c("/list")},children:"Rss List"}),Object(g.jsx)("div",{className:"menu-item",onClick:function(){c("/queue")},children:"Rss Queue"}),Object(g.jsx)("div",{className:"menu-item",onClick:function(){c("/clean-queue")},children:"Clean Queue"})]}):"/list"===r?Object(g.jsx)(P,{}):"/queue"===r?Object(g.jsx)(B,{}):"/clean-queue"===r?Object(g.jsx)(T,{}):Object(g.jsxs)("div",{children:["Page '",r,"' not fount"]})}var J=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,115)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;r(e),n(e),c(e),a(e),s(e)}))},M=r(64),z=r.n(M);r(101);function G(e){var t=e.children,r=c.a.useState(!1),n=Object(u.a)(r,2),a=n[0],s=n[1],i=c.a.useState(!1),l=Object(u.a)(i,2),j=l[0],b=l[1],f=c.a.useState(""),v=Object(u.a)(f,2),p=v[0],x=v[1],O=c.a.useState(""),k=Object(u.a)(O,2),w=k[0],S=k[1],y=C(),E=y.service,F=y.setService;return c.a.useEffect((function(){var e=function(){var e=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,E.checkAuth();case 3:e.sent?s(!0):(s(!1),m.a.remove("auth_token")),b(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[E]),j?Object(g.jsx)("div",{className:"CenterPage",children:Object(g.jsx)(h.a,{})}):a?t:Object(g.jsx)("div",{className:"CenterPage",children:Object(g.jsx)("form",{onSubmit:function(e){var t=z.a.encode("".concat(p,":").concat(w));m.a.set("auth_token",t),F(N(t)),e.preventDefault()},children:Object(g.jsxs)("table",{children:[Object(g.jsx)("thead",{}),Object(g.jsxs)("tbody",{children:[Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{children:Object(g.jsx)("label",{htmlFor:"username",children:"Username: "})}),Object(g.jsx)("td",{children:Object(g.jsx)("input",{type:"text",value:p,onChange:function(e){x(e.target.value)}})})]}),Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{children:Object(g.jsx)("label",{htmlFor:"password",children:"Password: "})}),Object(g.jsx)("td",{children:Object(g.jsx)("input",{type:"password",value:w,onChange:function(e){S(e.target.value)}})})]}),Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{}),Object(g.jsx)("td",{className:"Submit",children:Object(g.jsx)("input",{type:"submit",value:"Submit"})})]})]})]})})})}s.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(y,{children:Object(g.jsx)(G,{children:Object(g.jsx)(V,{})})})}),document.getElementById("root")),J()},72:function(e,t,r){},93:function(e,t,r){},98:function(e,t,r){}},[[103,1,2]]]);
//# sourceMappingURL=main.952f7ce8.chunk.js.map