{"version":3,"sources":["services/service.js","components/WithService.jsx","services/filterService.js","pages/RssListPage.jsx","pages/QueuePage.jsx","pages/CleanQueuePage.jsx","App.jsx","reportWebVitals.js","components/WithLogin.jsx","index.jsx"],"names":["createService","token","http","axios","create","baseURL","process","timeout","headers","Authorization","checkAuth","a","post","status","fetchRssList","get","res","console","error","data","updateById","id","viewed","saved","put","getNextFromQueue","count","cleanRssQueue","delete","ServiceContext","React","createContext","service","setService","useService","useContext","WithService","children","Cookies","useState","value","useMemo","Provider","FilterService","filter","localStorage","getItem","setItem","rssList","this","getFilter","rss","RssListPage","setRssList","filteredRssList","setFilteredRssList","loading","setLoading","setFilter","useEffect","fetch","sort","b","className","CircularProgress","onClick","map","i","RssRow","updateRss","newState","newRssList","v","window","open","url","focus","title","update","alert","SeenToggleIcon","QueuePage","setCount","setRss","fetchFromQueue","RssDetail","fetchNextRss","RssButtons","rank","bookmark","markViewed","CleanPage","cleaned","setCleaned","style","display","alignItems","justifyContent","marginTop","cleanQueue","ok","App","router","setRouter","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","WithLogin","logged","setLogged","user","setUser","pass","setPass","remove","onSubmit","event","base64","encode","set","preventDefault","htmlFor","type","onChange","e","target","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.952f7ce8.chunk.js","sourcesContent":["import axios from \"axios\";\n\nexport const createService = (token) => {\n    const http = axios.create({\n        baseURL: process.env.REACT_APP_BACKEND_URL,\n        timeout: 10000,\n        headers: {\n            Authorization: \"Basic \" + token,\n        }\n    })\n    return {\n        checkAuth: async () => {\n            try {\n                const res = await http.post(`/checkauth`);\n                if (res.status !== 200) {\n                    return false;\n                }\n                return true;\n            } catch (error) {\n                return false;\n            }\n        },\n        fetchRssList: async () => {\n            try {\n                const res = await http.get('/rss')\n                if (res.status !== 200) {\n                    console.error(\"Error during /rss call\", res.status, res.data)\n                    return []\n                }\n\n                return res.data\n            } catch (err) {\n                console.error(\"Error during /rss call\", err)\n                return []\n            }\n        },\n        updateById: async (id, viewed, saved) => {\n            try {\n                const res = await http.put(`/rss/${id}`, { viewed, saved })\n                if (res.status !== 200) {\n                    console.error(\"Error during /rss/id call\", res.status, res.data)\n                    return false\n                }\n                return true\n            } catch (err) {\n                console.error(\"Error during /rss/id call\", err)\n                return false\n            }\n        },\n        getNextFromQueue: async () => {\n            try {\n                const res = await http.get('/rss/queue/next')\n                if (res.status !== 200) {\n                    console.error(\"Error during /rss/queue/next call\", res.status, res.data)\n                    return { count: 0 }\n                }\n\n                return res.data\n            } catch (err) {\n                console.error(\"Error during /rss/queue/next call\", err)\n                return { count: 0 }\n            }\n        },\n        cleanRssQueue: async () => {\n            try {\n                const res = await http.delete('/rss/queue/clean')\n                if (res.status !== 200) {\n                    console.error(\"Error during /rss/queue/clean call\", res.status, res.data)\n                    return false\n                }\n\n                return true\n            } catch (err) {\n                console.error(\"Error during /rss/queue/clean call\", err)\n                return false\n            }\n        }\n    }\n}","import React from \"react\";\nimport Cookies from \"js-cookie\";\nimport { createService } from \"../services/service\";\n\nexport const ServiceContext = React.createContext({\n  service: createService(\"\"),\n  setService: () => {},\n});\n\nexport const useService = () => React.useContext(ServiceContext);\n\nexport default function WithService({ children }) {\n  const token = Cookies.get(\"auth_token\");\n  const [service, setService] = React.useState(createService(token? token : \"\"));\n  const value = React.useMemo(() => ({ service, setService }), [service]);\n  return (\n    <ServiceContext.Provider value={value}>{children}</ServiceContext.Provider>\n  );\n}\n","export class FilterService {\n\n    static getFilter() {\n        const filter = localStorage.getItem(\"filter\")\n        if (!filter) {\n            return \"ALL\"\n        }\n        return filter\n    }\n\n    static setFilter(filter) {\n        localStorage.setItem(\"filter\", filter)\n    }\n\n    static filter(rssList) {\n        const filter = this.getFilter()\n\n        if (filter === \"SAVED\") {\n            return rssList.filter(rss => rss.saved)\n        }\n        else if (filter === \"UNSEEN\") {\n            return rssList.filter(rss=> !rss.viewed)\n        }\n        else {\n            return rssList\n        }\n    }\n}","import React, { useEffect } from \"react\";\nimport VisibilityIcon from \"@mui/icons-material/Visibility\";\nimport VisibilityOffIcon from \"@mui/icons-material/VisibilityOff\";\nimport BookmarkIcon from \"@mui/icons-material/Bookmark\";\nimport CircularProgress from \"@mui/material/CircularProgress\";\n\nimport { useService } from \"../components/WithService\";\nimport \"./RssListPage.css\";\nimport { FilterService } from \"../services/filterService\";\n\nexport default function RssListPage() {\n  const { service } = useService();\n  const [rssList, setRssList] = React.useState([]);\n  const [filteredRssList, setFilteredRssList] = React.useState([]);\n  const [loading, setLoading] = React.useState(false);\n  const [filter, setFilter] = React.useState(FilterService.getFilter());\n\n  useEffect(() => {\n    const fetch = async () => {\n      setLoading(true);\n      const data = await service.fetchRssList();\n      data.sort(function (a, b) {\n        return b.id - a.id;\n      });\n      setRssList(data);\n      setLoading(false);\n    };\n    fetch();\n  }, [service]);\n\n  useEffect(() => {\n    FilterService.setFilter(filter);\n  }, [filter]);\n\n  useEffect(() => {\n    setFilteredRssList(FilterService.filter(rssList));\n  }, [rssList, filter]);\n\n  if (loading) {\n    return (\n      <div className=\"CenterPage\">\n        <CircularProgress />\n      </div>\n    );\n  }\n  return (\n    <>\n      <div className=\"filters\">\n        <div\n          className={`filter clickable ${\n            filter === \"ALL\" ? \"active-filter\" : \"\"\n          }`}\n          onClick={() => {\n            setFilter(\"ALL\");\n          }}\n        >\n          ALL\n        </div>\n        <div\n          className={`filter clickable ${\n            filter === \"UNSEEN\" ? \"active-filter\" : \"\"\n          }`}\n          onClick={() => {\n            setFilter(\"UNSEEN\");\n          }}\n        >\n          UNSEEN\n        </div>\n        <div\n          className={`filter clickable ${\n            filter === \"SAVED\" ? \"active-filter\" : \"\"\n          }`}\n          onClick={() => {\n            setFilter(\"SAVED\");\n          }}\n        >\n          SAVED\n        </div>\n      </div>\n      <div className=\"rss-list\">\n        {filteredRssList.map((rss, i) => (\n          <RssRow\n            rss={rss}\n            updateRss={(newState) => {\n              const newRssList = rssList.map((v) => {\n                if (v.id === newState.id) {\n                  return newState;\n                } else {\n                  return v;\n                }\n              });\n              setRssList(newRssList);\n            }}\n            key={rss.id}\n          />\n        ))}\n      </div>\n    </>\n  );\n}\n\nfunction RssRow({ rss, updateRss }) {\n  const { service } = useService();\n\n  return (\n    <div\n      className={\n        rss.viewed && !rss.saved ? \"rss-row viewed disabled\" : \"rss-row\"\n      }\n    >\n      <div\n        className=\"rss-title clickable\"\n        onClick={() => {\n          window.open(rss.url, \"_blank\").focus();\n        }}\n      >\n        {rss.title}\n      </div>\n\n      <div className=\"icons\">\n        <div\n          onClick={() => {\n            const update = async () => {\n              const ok = await service.updateById(\n                rss.id,\n                rss.viewed,\n                !rss.saved\n              );\n              if (ok) {\n                updateRss({ ...rss, saved: !rss.saved });\n              } else {\n                alert(\"Update failed\");\n              }\n            };\n            update();\n          }}\n        >\n          <BookmarkIcon\n            className={rss.saved ? \"clickable\" : \"clickable disabled\"}\n          />\n        </div>\n        <div\n          onClick={() => {\n            const update = async () => {\n              const ok = await service.updateById(\n                rss.id,\n                !rss.viewed,\n                rss.saved\n              );\n              if (ok) {\n                updateRss({ ...rss, viewed: !rss.viewed });\n              } else {\n                alert(\"Update failed\");\n              }\n            };\n            update();\n          }}\n        >\n          <SeenToggleIcon viewed={rss.viewed} />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction SeenToggleIcon({ viewed }) {\n  if (viewed) {\n    return (\n      <div className=\"clickable\">\n        <VisibilityOffIcon />\n      </div>\n    );\n  } else {\n    return (\n      <div className=\"clickable\">\n        <VisibilityIcon />\n      </div>\n    );\n  }\n}\n","import React, { useEffect } from \"react\";\nimport CircularProgress from \"@mui/material/CircularProgress\";\nimport VisibilityIcon from \"@mui/icons-material/Visibility\";\nimport BookmarkIcon from \"@mui/icons-material/Bookmark\";\nimport RefreshIcon from \"@mui/icons-material/Refresh\";\n\nimport { useService } from \"../components/WithService\";\nimport \"./QueuePage.css\";\n\nexport default function QueuePage() {\n  const { service } = useService();\n  const [loading, setLoading] = React.useState(true);\n  const [count, setCount] = React.useState(0);\n  const [rss, setRss] = React.useState(null);\n  const fetchFromQueue = async () => {\n    setLoading(true);\n    setRss(null);\n    const data = await service.getNextFromQueue();\n    setLoading(false);\n    setCount(data.count);\n    setRss(data.rss);\n  };\n\n  useEffect(() => {\n    fetchFromQueue();\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  if (loading) {\n    return (\n      <div className=\"CenterPage\">\n        <CircularProgress />\n      </div>\n    );\n  }\n  return (\n    <div className=\"content\">\n      <div className=\"count\">In queue: {count}</div>\n      {rss ? (\n        <RssDetail rss={rss} fetchNextRss={fetchFromQueue} />\n      ) : (\n        <div className=\"button clickable footer\" onClick={fetchFromQueue}>\n          <RefreshIcon />\n        </div>\n      )}\n      {rss ? <RssButtons rss={rss} fetchNextRss={fetchFromQueue} /> : null}\n    </div>\n  );\n}\n\nfunction RssDetail({ rss }) {\n  return (\n    <div\n      className=\"details clickable\"\n      onClick={() => {\n        window.open(rss.url, \"_blank\").focus();\n      }}\n    >\n      <div>Rank: {rss.rank}</div>\n      <div>Title: </div>\n      <hr />\n      <div className=\"title\">{rss.title}</div>\n    </div>\n  );\n}\n\nfunction RssButtons({ rss, fetchNextRss }) {\n  const { service } = useService();\n  return (\n    <div className=\"buttons footer\">\n      <div\n        className=\"button clickable\"\n        onClick={() => {\n          const bookmark = async () => {\n            const ok = await service.updateById(rss.id, true, true);\n            if (ok) {\n              fetchNextRss();\n            } else {\n              alert(\"Problem to bookmark rss\");\n            }\n          };\n\n          bookmark();\n        }}\n      >\n        <BookmarkIcon />\n      </div>\n      <div\n        className=\"button clickable\"\n        onClick={() => {\n          const markViewed = async () => {\n            const ok = await service.updateById(rss.id, true, false);\n            if (ok) {\n              fetchNextRss();\n            } else {\n              alert(\"Problem to update rss\");\n            }\n          };\n\n          markViewed();\n        }}\n      >\n        <VisibilityIcon />\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport WarningIcon from \"@mui/icons-material/Warning\";\nimport CircularProgress from \"@mui/material/CircularProgress\";\n\nimport { useService } from \"../components/WithService\";\n\nexport default function CleanPage() {\n  const { service } = useService();\n  const [loading, setLoading] = React.useState(false);\n  const [cleaned, setCleaned] = React.useState(false);\n\n  if (loading) {\n    return (\n      <div className=\"CenterPage\">\n        <CircularProgress />\n      </div>\n    );\n  }\n\n  if (cleaned) {\n    return <div className=\"CenterPage\">Cleaned</div>;\n  }\n\n  return (\n    <div\n      className=\"menu-item\"\n      style={{\n        display: \"flex\",\n        alignItems: \"flex-end\",\n        justifyContent: \"center\",\n        marginTop: \"45vh\",\n      }}\n      onClick={() => {\n        const cleanQueue = async () => {\n          setLoading(true);\n          const ok = await service.cleanRssQueue()\n          if (!ok) {\n            alert(\"sth go wrong\")\n          }\n          setCleaned(ok);\n          setLoading(false);\n        };\n\n        cleanQueue();\n      }}\n    >\n      <WarningIcon />\n      Clean Queue\n      <WarningIcon />\n    </div>\n  );\n}\n","import * as React from \"react\";\n\nimport RssListPage from \"./pages/RssListPage\";\nimport QueuePage from \"./pages/QueuePage\";\nimport CleanQueuePage from \"./pages/CleanQueuePage\";\n\nexport default function App() {\n  const [router, setRouter] = React.useState(\"/\");\n  if (router === \"/\") {\n    return (\n      <div className=\"menu\">\n        <div\n          className=\"menu-item\"\n          onClick={() => {\n            setRouter(\"/list\");\n          }}\n        >\n          Rss List\n        </div>\n\n        <div\n          className=\"menu-item\"\n          onClick={() => {\n            setRouter(\"/queue\");\n          }}\n        >\n          Rss Queue\n        </div>\n\n        <div\n          className=\"menu-item\"\n          onClick={() => {\n            setRouter(\"/clean-queue\");\n          }}\n        >\n          Clean Queue\n        </div>\n\n      </div>\n    );\n  }\n  if (router === \"/list\") {\n    return <RssListPage />;\n  }\n\n  if (router === \"/queue\") {\n    return <QueuePage />;\n  }\n\n  if (router === \"/clean-queue\") {\n    return <CleanQueuePage />;\n  }\n\n  return <div>Page '{router}' not fount</div>;\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport Cookies from \"js-cookie\";\nimport base64 from \"base-64\";\nimport CircularProgress from \"@mui/material/CircularProgress\";\n\nimport \"./Login.css\";\nimport { useService } from \"./WithService\";\nimport { createService } from \"../services/service\";\n\nexport default function WithLogin({ children }) {\n  const [logged, setLogged] = React.useState(false);\n  const [loading, setLoading] = React.useState(false);\n  const [user, setUser] = React.useState(\"\");\n  const [pass, setPass] = React.useState(\"\");\n  const { service, setService } = useService();\n\n  React.useEffect(() => {\n    const checkAuth = async () => {\n      setLoading(true)\n      const isLoggedIn = await service.checkAuth();\n      if (isLoggedIn) {\n        setLogged(true);\n      } else {\n        setLogged(false);\n        Cookies.remove(\"auth_token\");\n      }\n      setLoading(false)\n    };\n    checkAuth();\n  }, [service]);\n\n  function handleSubmit(event) {\n    const token = base64.encode(`${user}:${pass}`);\n    Cookies.set(\"auth_token\", token);\n    setService(createService(token));\n    event.preventDefault();\n  }\n\n  if (loading) {\n    return (\n      <div className=\"CenterPage\">\n        <CircularProgress />\n      </div>\n    );\n  }\n\n  if (logged) {\n    return children;\n  }\n\n  return (\n    <div className=\"CenterPage\">\n      <form onSubmit={handleSubmit}>\n        <table>\n          <thead></thead>\n          <tbody>\n            <tr>\n              <td>\n                <label htmlFor=\"username\">Username: </label>\n              </td>\n              <td>\n                <input\n                  type=\"text\"\n                  value={user}\n                  onChange={(e) => {\n                    setUser(e.target.value);\n                  }}\n                />\n              </td>\n            </tr>\n            <tr>\n              <td>\n                <label htmlFor=\"password\">Password: </label>\n              </td>\n              <td>\n                <input\n                  type=\"password\"\n                  value={pass}\n                  onChange={(e) => {\n                    setPass(e.target.value);\n                  }}\n                />\n              </td>\n            </tr>\n            <tr>\n              <td></td>\n              <td className=\"Submit\">\n                <input type=\"submit\" value=\"Submit\" />\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </form>\n    </div>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport WithLogin from \"./components/WithLogin\";\nimport WithService from \"./components/WithService\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <WithService>\n      <WithLogin>\n        <App />\n      </WithLogin>\n    </WithService>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\nreportWebVitals();\n"],"sourceRoot":""}