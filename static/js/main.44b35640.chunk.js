(this["webpackJsonprss-reader-fe"]=this["webpackJsonprss-reader-fe"]||[]).push([[0],{101:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r.n(n),a=r(52),s=r.n(a),i=r(62),u=(r(71),r(5)),l=r(27),o=r(8),d=r.n(o),j=r(16),b=r(60),f=r.n(b),v=r(59),h=r.n(v),p=r(58),O=r.n(p),x=r(112),m=r(26),k=r.n(m),w=r(53),g=r.n(w),S=function(e){var t=g.a.create({baseURL:"https://meny-rss-reader.herokuapp.com/",timeout:1e4,headers:{Authorization:"Basic "+e}});return{checkAuth:function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.post("/checkauth");case 3:if(200===e.sent.status){e.next=6;break}return e.abrupt("return",!1);case 6:return e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),fetchRssList:function(){var e=Object(j.a)(d.a.mark((function e(){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.get("/rss");case 3:if(200===(r=e.sent).status){e.next=7;break}return console.error("Error during /rss call",r.status,r.data),e.abrupt("return",[]);case 7:return e.abrupt("return",r.data);case 10:e.prev=10,e.t0=e.catch(0),console.error("Error during /rss call",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),updateById:function(){var e=Object(j.a)(d.a.mark((function e(r,n,c){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.put("/rss/".concat(r),{viewed:n,saved:c});case 3:if(200===(a=e.sent).status){e.next=7;break}return console.error("Error during /rss/id call",a.status,a.data),e.abrupt("return",!1);case 7:return e.abrupt("return",!0);case 10:return e.prev=10,e.t0=e.catch(0),console.error("Error during /rss/id call",e.t0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,r,n){return e.apply(this,arguments)}}()}},N=r(1),E=c.a.createContext({service:S(""),setService:function(){}}),y=function(){return c.a.useContext(E)};function C(e){var t=e.children,r=k.a.get("auth_token"),n=c.a.useState(S(r||"")),a=Object(u.a)(n,2),s=a[0],i=a[1],l=c.a.useMemo((function(){return{service:s,setService:i}}),[s]);return Object(N.jsx)(E.Provider,{value:l,children:t})}r(92);var L=r(54),F=r(55),A=function(){function e(){Object(L.a)(this,e)}return Object(F.a)(e,null,[{key:"getFilter",value:function(){var e=localStorage.getItem("filter");return e||"ALL"}},{key:"setFilter",value:function(e){localStorage.setItem("filter",e)}},{key:"filter",value:function(e){var t=this.getFilter();return"SAVED"===t?e.filter((function(e){return e.saved})):"UNSEEN"===t?e.filter((function(e){return!e.viewed})):e}}]),e}();function P(){var e=y().service,t=c.a.useState([]),r=Object(u.a)(t,2),a=r[0],s=r[1],i=c.a.useState([]),l=Object(u.a)(i,2),o=l[0],b=l[1],f=c.a.useState(!1),v=Object(u.a)(f,2),h=v[0],p=v[1],O=c.a.useState(A.getFilter()),m=Object(u.a)(O,2),k=m[0],w=m[1];return Object(n.useEffect)((function(){var t=function(){var t=Object(j.a)(d.a.mark((function t(){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p(!0),t.next=3,e.fetchRssList();case 3:(r=t.sent).sort((function(e,t){return t.id-e.id})),s(r),p(!1);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e]),Object(n.useEffect)((function(){A.setFilter(k)}),[k]),Object(n.useEffect)((function(){b(A.filter(a))}),[a,k]),h?Object(N.jsx)("div",{className:"CenterPage",children:Object(N.jsx)(x.a,{})}):Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)("div",{className:"filters",children:[Object(N.jsx)("div",{className:"filter clickable ".concat("ALL"===k?"active-filter":""),onClick:function(){w("ALL")},children:"ALL"}),Object(N.jsx)("div",{className:"filter clickable ".concat("UNSEEN"===k?"active-filter":""),onClick:function(){w("UNSEEN")},children:"UNSEEN"}),Object(N.jsx)("div",{className:"filter clickable ".concat("SAVED"===k?"active-filter":""),onClick:function(){w("SAVED")},children:"SAVED"})]}),Object(N.jsx)("div",{className:"rss-list",children:o.map((function(e,t){return Object(N.jsx)(U,{rss:e,updateRss:function(e){var t=a.map((function(t){return t.id===e.id?e:t}));s(t)}},e.id)}))})]})}function U(e){var t=e.rss,r=e.updateRss,n=y().service;return Object(N.jsxs)("div",{className:t.viewed&&!t.saved?"rss-row viewed disabled":"rss-row",children:[Object(N.jsxs)("div",{className:"icons",children:[Object(N.jsx)("div",{onClick:function(){var e=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.updateById(t.id,t.viewed,!t.saved);case 2:e.sent?r(Object(l.a)(Object(l.a)({},t),{},{saved:!t.saved})):alert("Update failed");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()},children:Object(N.jsx)(O.a,{className:t.saved?"clickable":"clickable disabled"})}),Object(N.jsx)("div",{onClick:function(){var e=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.updateById(t.id,!t.viewed,t.saved);case 2:e.sent?r(Object(l.a)(Object(l.a)({},t),{},{viewed:!t.viewed})):alert("Update failed");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()},children:Object(N.jsx)(I,{viewed:t.viewed})})]}),Object(N.jsx)("div",{className:"rss-title clickable",onClick:function(){window.open(t.url,"_blank").focus()},children:t.title})]})}function I(e){return e.viewed?Object(N.jsx)("div",{className:"clickable",children:Object(N.jsx)(h.a,{})}):Object(N.jsx)("div",{className:"clickable",children:Object(N.jsx)(f.a,{})})}function R(){var e=n.useState("/"),t=Object(u.a)(e,2),r=t[0],c=t[1];return"/"===r?Object(N.jsxs)("div",{className:"menu",children:[Object(N.jsx)("div",{className:"menu-item",onClick:function(){c("/list")},children:"Rss List"}),Object(N.jsx)("div",{className:"menu-item",onClick:function(){c("/queue")},children:"Rss Queue"})]}):"/list"===r?Object(N.jsx)(P,{}):"/queue"===r?Object(N.jsx)("div",{children:"queue page"}):Object(N.jsxs)("div",{children:["Page '",r,"' not fount"]})}var B=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,113)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;r(e),n(e),c(e),a(e),s(e)}))},D=r(61),V=r.n(D);r(99);function _(e){var t=e.children,r=c.a.useState(!1),n=Object(u.a)(r,2),a=n[0],s=n[1],i=c.a.useState(!1),l=Object(u.a)(i,2),o=l[0],b=l[1],f=c.a.useState(""),v=Object(u.a)(f,2),h=v[0],p=v[1],O=c.a.useState(""),m=Object(u.a)(O,2),w=m[0],g=m[1],E=y(),C=E.service,L=E.setService;return c.a.useEffect((function(){var e=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,C.checkAuth();case 3:e.sent?s(!0):(s(!1),k.a.remove("auth_token")),b(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[C]),o?Object(N.jsx)("div",{className:"CenterPage",children:Object(N.jsx)(x.a,{})}):a?t:Object(N.jsx)("div",{className:"CenterPage",children:Object(N.jsx)("form",{onSubmit:function(e){var t=V.a.encode("".concat(h,":").concat(w));k.a.set("auth_token",t),L(S(t)),e.preventDefault()},children:Object(N.jsxs)("table",{children:[Object(N.jsx)("thead",{}),Object(N.jsxs)("tbody",{children:[Object(N.jsxs)("tr",{children:[Object(N.jsx)("td",{children:Object(N.jsx)("label",{htmlFor:"username",children:"Username: "})}),Object(N.jsx)("td",{children:Object(N.jsx)("input",{type:"text",value:h,onChange:function(e){p(e.target.value)}})})]}),Object(N.jsxs)("tr",{children:[Object(N.jsx)("td",{children:Object(N.jsx)("label",{htmlFor:"password",children:"Password: "})}),Object(N.jsx)("td",{children:Object(N.jsx)("input",{type:"password",value:w,onChange:function(e){g(e.target.value)}})})]}),Object(N.jsxs)("tr",{children:[Object(N.jsx)("td",{}),Object(N.jsx)("td",{className:"Submit",children:Object(N.jsx)("input",{type:"submit",value:"Submit"})})]})]})]})})})}s.a.render(Object(N.jsx)(c.a.StrictMode,{children:Object(N.jsx)(C,{children:Object(N.jsx)(_,{children:Object(N.jsx)(i.a,{children:Object(N.jsx)(R,{})})})})}),document.getElementById("root")),B()},71:function(e,t,r){},92:function(e,t,r){},99:function(e,t,r){}},[[101,1,2]]]);
//# sourceMappingURL=main.44b35640.chunk.js.map